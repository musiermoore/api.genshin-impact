<?php

namespace Database\Seeders;

use App\Models\Characteristic;
use App\Models\Rarity;
use Illuminate\Database\Seeder;
use Illuminate\Support\Facades\DB;

class ArtifactExtraCharacteristicSeeder extends Seeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        $statsByRarity = [
            '1-star' => [
                'hp' => [
                    0 => '23.9',
                    1 => '29.88',
                ],
                'hp-percent' => [
                    0 => '1.17',
                    1 => '1.46',
                ],
                'atk' => [
                    0 => '1.56',
                    1 => '1.95',
                ],
                'atk-percent' => [
                    0 => '1.17',
                    1 => '1.46',
                ],
                'def' => [
                    0 => '1.85',
                    1 => '2.31',
                ],
                'def-percent' => [
                    0 => '1.46',
                    1 => '1.82',
                ],
                'energy-recharge' => [
                    0 => '1.3',
                    1 => '1.62',
                ],
                'elemental-mastery' => [
                    0 => '4.66',
                    1 => '5.83',
                ],
                'crit-rate' => [
                    0 => '0.78',
                    1 => '0.97',
                ],
                'crit-dmg' => [
                    0 => '1.55',
                    1 => '1.94',
                ],
            ],
            '2-star' => [
                'hp' => [
                    0 => '50.19',
                    1 => '60.95',
                    2 => '71.7',
                ],
                'hp-percent' => [
                    0 => '1.63',
                    1 => '1.98',
                    2 => '2.33',
                ],
                'atk' => [
                    0 => '3.27',
                    1 => '3.97',
                    2 => '4.67',
                ],
                'atk-percent' => [
                    0 => '1.63',
                    1 => '1.98',
                    2 => '2.33',
                ],
                'def' => [
                    0 => '3.89',
                    1 => '4.72',
                    2 => '5.56',
                ],
                'def-percent' => [
                    0 => '2.04',
                    1 => '2.48',
                    2 => '2.91',
                ],
                'energy-recharge' => [
                    0 => '1.81',
                    1 => '2.2',
                    2 => '2.59',
                ],
                'elemental-mastery' => [
                    0 => '6.53',
                    1 => '7.93',
                    2 => '9.33',
                ],
                'crit-rate' => [
                    0 => '1.09',
                    1 => '1.32',
                    2 => '1.55',
                ],
                'crit-dmg' => [
                    0 => '2.18',
                    1 => '2.64',
                    2 => '3.11',
                ],
            ],
            '3-star' => [
                'hp' => [
                    0 => '100.38',
                    1 => '114.72',
                    2 => '129.06',
                    3 => '143.4',
                ],
                'hp-percent' => [
                    0 => '2.45',
                    1 => '2.8',
                    2 => '3.15',
                    3 => '3.5',
                ],
                'atk' => [
                    0 => '6.54',
                    1 => '7.47',
                    2 => '8.4',
                    3 => '9.34',
                ],
                'atk-percent' => [
                    0 => '2.45',
                    1 => '2.8',
                    2 => '3.15',
                    3 => '3.5',
                ],
                'def' => [
                    0 => '7.78',
                    1 => '8.89',
                    2 => '10.0',
                    3 => '11.11',
                ],
                'def-percent' => [
                    0 => '3.06',
                    1 => '3.5',
                    2 => '3.93',
                    3 => '4.37',
                ],
                'energy-recharge' => [
                    0 => '2.72',
                    1 => '3.11',
                    2 => '3.5',
                    3 => '3.89',
                ],
                'elemental-mastery' => [
                    0 => '9.79',
                    1 => '11.19',
                    2 => '12.59',
                    3 => '13.99',
                ],
                'crit-rate' => [
                    0 => '1.63',
                    1 => '1.86',
                    2 => '2.1',
                    3 => '2.33',
                ],
                'crit-dmg' => [
                    0 => '3.26',
                    1 => '3.73',
                    2 => '4.2',
                    3 => '4.66',
                ],
            ],
            '4-star' => [
                'hp' => [
                    0 => '167.3',
                    1 => '191.2',
                    2 => '215.1',
                    3 => '239.0',
                ],
                'hp-percent' => [
                    0 => '3.26',
                    1 => '3.73',
                    2 => '4.2',
                    3 => '4.66',
                ],
                'atk' => [
                    0 => '10.89',
                    1 => '12.45',
                    2 => '14.0',
                    3 => '15.56',
                ],
                'atk-percent' => [
                    0 => '3.26',
                    1 => '3.73',
                    2 => '4.2',
                    3 => '4.66',
                ],
                'def' => [
                    0 => '12.96',
                    1 => '14.82',
                    2 => '16.67',
                    3 => '18.52',
                ],
                'def-percent' => [
                    0 => '4.08',
                    1 => '4.66',
                    2 => '5.25',
                    3 => '5.83',
                ],
                'energy-recharge' => [
                    0 => '3.63',
                    1 => '4.14',
                    2 => '4.66',
                    3 => '5.18',
                ],
                'elemental-mastery' => [
                    0 => '13.06',
                    1 => '14.92',
                    2 => '16.79',
                    3 => '18.65',
                ],
                'crit-rate' => [
                    0 => '2.18',
                    1 => '2.49',
                    2 => '2.8',
                    3 => '3.11',
                ],
                'crit-dmg' => [
                    0 => '4.35',
                    1 => '4.97',
                    2 => '5.6',
                    3 => '6.22',
                ],
            ],
            '5-star' => [
                'hp' => [
                    0 => '209.13',
                    1 => '239.0',
                    2 => '268.88',
                    3 => '298.75',
                ],
                'hp-percent' => [
                    0 => '4.08',
                    1 => '4.66',
                    2 => '5.25',
                    3 => '5.83',
                ],
                'atk' => [
                    0 => '13.62',
                    1 => '15.56',
                    2 => '17.51',
                    3 => '19.45',
                ],
                'atk-percent' => [
                    0 => '4.08',
                    1 => '4.66',
                    2 => '5.25',
                    3 => '5.83',
                ],
                'def' => [
                    0 => '16.2',
                    1 => '18.52',
                    2 => '20.83',
                    3 => '23.15',
                ],
                'def-percent' => [
                    0 => '5.1',
                    1 => '5.83',
                    2 => '6.56',
                    3 => '7.29',
                ],
                'energy-recharge' => [
                    0 => '4.53',
                    1 => '5.18',
                    2 => '5.83',
                    3 => '6.48',
                ],
                'elemental-mastery' => [
                    0 => '16.32',
                    1 => '18.65',
                    2 => '20.98',
                    3 => '23.31',
                ],
                'crit-rate' => [
                    0 => '2.72',
                    1 => '3.11',
                    2 => '3.5',
                    3 => '3.89',
                ],
                'crit-dmg' => [
                    0 => '5.44',
                    1 => '6.22',
                    2 => '6.99',
                    3 => '7.77',
                ],
            ],
        ];

        DB::table('artifact_extra_characteristics')->delete();

        $characteristics = Characteristic::query()
            ->get()
            ->keyBy('slug');

        $rarities = Rarity::query()
            ->get()
            ->keyBy('rarity');

        foreach ($statsByRarity as $starKey => $stats) {
            foreach ($stats as $statKey => $values) {
                foreach ($values as $tier => $value) {
                    $rarity = (int) str_replace('-star', '', $starKey);

                    $characteristics[$statKey]->extraArtifactValues()->attach(
                        [
                            $rarities[$rarity]['id'] => [
                                'tier' => $tier + 1,
                                'value' => $value
                            ]
                        ]
                    );
                }
            }
        }
    }
}
